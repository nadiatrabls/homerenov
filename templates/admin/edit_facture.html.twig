{% extends 'base.html.twig' %}

{% block title %}Modifier la facture{% endblock %}

{% block body %}
<div class="container my-5 back">
    <div class="card shadow-lg border-0">
        <div class="card-header  text-white text-center">
            <h2>Modifier la facture</h2>
        </div>
        <div class="card-body">
            <div class="col-md-8 mx-auto">
                {{ form_start(form_facture) }}
                
                <div class="mb-3">
                    {{ form_row(form_facture.numero) }}
                </div>
                <div class="mb-3">
                    {{ form_row(form_facture.dateEmission) }}
                </div>
                <div class="mb-3">
                    {{ form_row(form_facture.montant) }}
                </div>
                <div class="mb-3">
                    {{ form_row(form_facture.refChantier) }}
                </div>
                <div class="mb-3">
                    {{ form_row(form_facture.statusPaiement) }}
                </div>

                <!-- Si le fichier PDF existe, afficher le lien pour le télécharger -->
                {% if facture.fichier %}
                    <div class="mb-3">
                        <strong>Fichier PDF actuel :</strong>
                        <a href="{{ asset('uploads/factures/' ~ facture.fichier) }}" class="btn btn-primary" target="_blank">
                            <i class="fas fa-download"></i> Télécharger le fichier PDF
                        </a>
                    </div>
                {% endif %}

                <!-- Option pour télécharger un nouveau fichier PDF -->
                <div class="mb-3">
                    {{ form_row(form_facture.fichier) }}
                </div>

                <!-- Boutons Mettre à jour et Annuler -->
                <div class="d-flex justify-content-between">
                    <button type="submit" class="btn btn-success w-45 mt-3">
                        <i class="fas fa-save"></i> Mettre à jour la facture
                    </button>
                    
                    <a href="{{ path('admin_dashboard') }}" class="btn btn-secondary w-45 mt-3">
                        <i class="fas fa-times-circle"></i> Annuler
                    </a>
                </div>

                {{ form_end(form_facture) }}
            </div>
        </div>
    </div>
</div>

<!-- Styles personnalisés -->
<style>
    .card-header {
        background-color: #1d4e89; /* Couleur principale du logo */
        font-size: 1.5rem;
    }

    .card-body {
        background-color: #f8f9fa; /* Légère teinte grise pour différencier le corps du formulaire */
        padding: 30px;
    }

    .form-control {
        border-radius: 5px;
        border: 1px solid #ced4da;
        box-shadow: none;
    }

    .btn-primary, .btn-success, .btn-secondary {
        background-color: #1d4e89;
        border-color: #1d4e89;
    }

    .btn-primary:hover, .btn-success:hover, .btn-secondary:hover {
        background-color: #135a94; /* Couleur légèrement plus sombre pour l'effet hover */
    }

    .btn-primary i, .btn-success i, .btn-secondary i {
        margin-right: 5px;
    }

    .w-45 {
        width: 45%; /* Ajuste la largeur des boutons pour qu'ils occupent 45% chacun */
    }

    /* Margins for better spacing */
    .mb-3 {
        margin-bottom: 1.5rem;
    }

    .w-100 {
        width: 100%;
    }

    /* Responsive adjustments */
    @media (max-width: 767px) {
        .card-header {
            font-size: 1.2rem;
        }

        .btn {
            font-size: 0.9rem;
        }

        .card-body {
            padding: 20px;
        }

        .w-45 {
            width: 100%; /* Pour petits écrans, les boutons prennent toute la largeur */
        }
    }
</style>
{% endblock %}
